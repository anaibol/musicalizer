/**
 * This script should write itself to
 * stdout, three lines at a time.
 */
var es = require('event-stream')
  , trickle = require('./index')
  , fs = require('fs')

var stream = trickle({
    interval: 2500
  , flush: 3
})

fs.createReadStream(__filename, {
  encoding: 'utf8'
}).pipe(es.split(/\n/g))
  .pipe(stream)
  .pipe(es.join('\n'))
  .pipe(process.stdout)